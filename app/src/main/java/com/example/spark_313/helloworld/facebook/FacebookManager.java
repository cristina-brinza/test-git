package com.example.spark_313.helloworld.facebook;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.util.Log;import android.view.View;import com.facebook.AccessToken;import com.facebook.CallbackManager;import com.facebook.FacebookCallback;import com.facebook.FacebookException;import com.facebook.FacebookSdk;import com.facebook.login.LoginManager;import com.facebook.login.LoginResult;import java.util.Arrays;/** * Created by radu on 05.05.2015. */public class FacebookManager implements FacebookCallback<LoginResult>, GetUserAccountDetailsAsyncTask.OnResponseListener {    private CallbackManager mCallbackManager;    private Context mContext;    private OnFacebookLoginListener mListener;    public interface OnFacebookLoginListener {        void onLoginWithFacebookSuccessful();    }    public FacebookManager(Context context) {        FacebookSdk.sdkInitialize(context);        mContext = context;        mCallbackManager = CallbackManager.Factory.create();    }    public void attemptLoginWithFacebook(OnFacebookLoginListener listener) {        mListener = listener;        LoginManager.getInstance().registerCallback(mCallbackManager, this);        LoginManager.getInstance().logInWithReadPermissions((Activity) mContext, Arrays.asList("public_profile, email"));    }    public void onActivityResult(int requestCode, int resultCode, Intent data) {        mCallbackManager.onActivityResult(requestCode, resultCode, data);    }    @Override    public void onSuccess(LoginResult loginResult) {        if (mListener != null)            mListener.onLoginWithFacebookSuccessful();        AccessToken token = loginResult.getAccessToken();        GetUserAccountDetailsAsyncTask task = new GetUserAccountDetailsAsyncTask(this);        task.execute(token);    }    @Override    public void onCancel() {        String message = "onCancel";        Log.i("Cancel", message);    }    @Override    public void onError(FacebookException e) {        String message = "Error connecting to Facebook";    }    @Override    public void onFacebookResponse(String name, String email, String id, String token) {        Log.i("FB response", "Facebook response");    }    public static void logout() {        LoginManager.getInstance().logOut();    }}